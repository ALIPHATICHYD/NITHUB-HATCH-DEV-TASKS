{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","getProxiedPluginState","nonNullable","WEBPACK_LAYERS","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","constructor","options","dev","appDir","appDirBase","dirname","sep","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","clientModules","entryCSSFiles","chunkGroups","forEach","chunkGroup","getAppPathRequiredChunks","chunks","map","requiredChunk","has","files","file","endsWith","id","flat","filter","requiredChunks","chunkEntryName","test","replace","getFiles","f","startsWith","recordModule","mod","layer","appClient","resource","type","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","isAsyncModule","esmResource","addClientReference","exportName","async","edgeExportName","addSSRIdMapping","chunk","entryMods","chunkGraph","getChunkEntryModulesIterable","request","includes","connections","moduleGraph","getOutgoingConnections","connection","dependency","clientEntryMod","getResolvedModule","modId","getModuleId","module","concatenatedMod","concatenatedModId","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}