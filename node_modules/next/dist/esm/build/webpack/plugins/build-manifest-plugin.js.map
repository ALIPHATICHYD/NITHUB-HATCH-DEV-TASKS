{"version":3,"sources":["../../../../src/build/webpack/plugins/build-manifest-plugin.ts"],"names":["devalue","webpack","sources","BUILD_MANIFEST","MIDDLEWARE_BUILD_MANIFEST","CLIENT_STATIC_FILES_PATH","CLIENT_STATIC_FILES_RUNTIME_MAIN","CLIENT_STATIC_FILES_RUNTIME_MAIN_APP","CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL","CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH","CLIENT_STATIC_FILES_RUNTIME_AMP","SYSTEM_ENTRYPOINTS","getRouteFromEntrypoint","ampFirstEntryNamesMap","getSortedRoutes","spans","generateClientManifest","compiler","compilation","assetMap","rewrites","compilationSpan","get","genClientManifestSpan","traceChild","traceFn","clientManifest","__rewrites","appDependencies","Set","pages","sortedPageKeys","Object","keys","forEach","page","dependencies","filteredDeps","filter","dep","has","length","sortedPages","getEntrypointFiles","entrypoint","getFiles","file","test","map","replace","processRoute","r","rewrite","destination","startsWith","BuildManifestPlugin","constructor","options","buildId","isDevFallback","beforeFiles","afterFiles","fallback","appDirEnabled","exportRuntime","createAssets","assets","createAssetsSpan","entrypoints","polyfillFiles","devFiles","ampDevFiles","lowPriorityFiles","rootMainFiles","ampFirstPages","ampFirstEntryNames","entryName","pagePath","push","mainFiles","compilationAssets","getAssets","p","name","endsWith","info","v","values","filesForPage","srcEmptySsgManifest","ssgManifestPath","RawSource","sort","reduce","a","c","buildManifestName","JSON","stringify","clientManifestPath","apply","hooks","make","tap","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS"],"mappings":"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"}