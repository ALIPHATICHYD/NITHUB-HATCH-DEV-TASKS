{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["callServer","NEXT_ROUTER_STATE_TREE","NEXT_URL","RSC_CONTENT_TYPE_HEADER","createRecordFromThenable","readRecordValue","createFromFetch","encodeReply","PrefetchKind","addBasePath","createHrefFromUrl","RedirectType","getRedirectError","fetchServerAction","state","actionId","actionArgs","body","res","fetch","method","headers","Accept","JSON","stringify","tree","process","env","__NEXT_ACTIONS_DEPLOYMENT_ID","NEXT_DEPLOYMENT_ID","nextUrl","location","get","revalidatedParts","revalidatedHeader","parse","paths","tag","cookie","e","redirectLocation","URL","window","origin","undefined","isFlightResponse","response","Promise","resolve","payload","actionFlightData","actionResult","serverActionReducer","action","mutable","serverActionApplied","inFlightServerAction","previousTree","previousUrl","canonicalUrl","prefetchCache","clear","length","href","previousCacheEntry","set","data","kind","TEMPORARY","prefetchTime","Date","now","treeAtTimeOfPrefetch","lastUsedTime","reject","toString","push","setTimeout","changeByServerResponse","status","value"],"mappings":"AAKA,SAASA,UAAU,QAAQ,2BAA0B;AACrD,SACEC,sBAAsB,EACtBC,QAAQ,EACRC,uBAAuB,QAClB,2BAA0B;AACjC,SAASC,wBAAwB,QAAQ,iCAAgC;AACzE,SAASC,eAAe,QAAQ,uBAAsB;AACtD,6DAA6D;AAC7D,SAASC,eAAe,QAAQ,kCAAiC;AACjE,6DAA6D;AAC7D,SAASC,WAAW,QAAQ,kCAAiC;AAE7D,SACEC,YAAY,QAIP,0BAAyB;AAChC,SAASC,WAAW,QAAQ,yBAAwB;AACpD,SAASC,iBAAiB,QAAQ,0BAAyB;AAC3D,SAASC,YAAY,EAAEC,gBAAgB,QAAQ,iBAAgB;AAa/D,eAAeC,kBACbC,KAA2B,EAC3B,KAA4C,EACV;IADlC,IAAA,EAAEC,SAAQ,EAAEC,WAAU,EAAsB,GAA5C;IAEA,MAAMC,OAAO,MAAMV,YAAYS;IAE/B,MAAME,MAAM,MAAMC,MAAM,IAAI;QAC1BC,QAAQ;QACRC,SAAS;YACPC,QAAQnB;YACR,eAAeY;YACf,CAACd,uBAAuB,EAAEsB,KAAKC,SAAS,CAACV,MAAMW,IAAI;YACnD,GAAIC,QAAQC,GAAG,CAACC,4BAA4B,IAC5CF,QAAQC,GAAG,CAACE,kBAAkB,GAC1B;gBACE,mBAAmBH,QAAQC,GAAG,CAACE,kBAAkB;YACnD,IACA,CAAC,CAAC;YACN,GAAIf,MAAMgB,OAAO,GACb;gBACE,CAAC5B,SAAS,EAAEY,MAAMgB,OAAO;YAC3B,IACA,CAAC,CAAC;QACR;QACAb;IACF;IAEA,MAAMc,WAAWb,IAAIG,OAAO,CAACW,GAAG,CAAC;IACjC,IAAIC;IACJ,IAAI;QACF,MAAMC,oBAAoBX,KAAKY,KAAK,CAClCjB,IAAIG,OAAO,CAACW,GAAG,CAAC,2BAA2B;QAE7CC,mBAAmB;YACjBG,OAAOF,iBAAiB,CAAC,EAAE,IAAI,EAAE;YACjCG,KAAK,CAAC,CAACH,iBAAiB,CAAC,EAAE;YAC3BI,QAAQJ,iBAAiB,CAAC,EAAE;QAC9B;IACF,EAAE,OAAOK,GAAG;QACVN,mBAAmB;YACjBG,OAAO,EAAE;YACTC,KAAK,KAAK;YACVC,QAAQ,KAAK;QACf;IACF;IAEA,MAAME,mBAAmBT,WACrB,IAAIU,IAAIhC,YAAYsB,WAAWW,OAAOX,QAAQ,CAACY,MAAM,IACrDC,SAAS;IAEb,IAAIC,mBACF3B,IAAIG,OAAO,CAACW,GAAG,CAAC,oBAAoB7B;IAEtC,IAAI0C,kBAAkB;QACpB,MAAMC,WAAiC,MAAMxC,gBAC3CyC,QAAQC,OAAO,CAAC9B,MAChB;YACElB;QACF;QAGF,qEAAqE;QACrE,IAAI+B,UAAU;YACZ,MAAM,GAAGkB,QAAQ,GAAGH;YACpB,OAAO;gBACLI,kBAAkBD,kBAAAA,KAAAA,IAAAA,OAAS,CAAC,EAAE;gBAC9BT;gBACAP;YACF;QACA,6DAA6D;QAC/D,OAAO;YACL,MAAM,CAACkB,cAAc,GAAGD,iBAAiB,CAAC,GAAGJ,mBAAAA,WAAY,EAAE;YAC3D,OAAO;gBACLK;gBACAD;gBACAV;gBACAP;YACF;QACF,CAAC;IACH,CAAC;IACD,OAAO;QACLO;QACAP;IACF;AACF;AAEA;;;CAGC,GACD,OAAO,SAASmB,oBACdtC,KAA2B,EAC3BuC,MAA0B,EACZ;IACd,qFAAqF;IACrF,IAAIA,OAAOC,OAAO,CAACC,mBAAmB,EAAE;QACtC,OAAOzC;IACT,CAAC;IAED,IAAI,CAACuC,OAAOC,OAAO,CAACE,oBAAoB,EAAE;QACxCH,OAAOC,OAAO,CAACG,YAAY,GAAG3C,MAAMW,IAAI;QACxC4B,OAAOC,OAAO,CAACI,WAAW,GAAG5C,MAAM6C,YAAY;QAC/CN,OAAOC,OAAO,CAACE,oBAAoB,GAAGpD,yBACpCS,kBAAkBC,OAAOuC;IAE7B,CAAC;IACD,IAAI;QACF,gDAAgD;QAChD,MAAM,EACJF,aAAY,EACZD,iBAAgB,EAChBV,iBAAgB,EAChBP,iBAAgB,EACjB,GAAG5B,gBACFgD,OAAOC,OAAO,CAACE,oBAAoB;QAGrC,iFAAiF;QACjF,wDAAwD;QACxD,IAAIvB,iBAAiBI,GAAG,IAAIJ,iBAAiBK,MAAM,EAAE;YACnD,2CAA2C;YAC3CxB,MAAM8C,aAAa,CAACC,KAAK;QAC3B,OAAO,IAAI5B,iBAAiBG,KAAK,CAAC0B,MAAM,GAAG,GAAG;YAC5C,+EAA+E;YAC/E,0BAA0B;YAC1B,2EAA2E;YAC3E,uEAAuE;YACvEhD,MAAM8C,aAAa,CAACC,KAAK;QAC3B,CAAC;QAED,IAAIrB,kBAAkB;YACpB,mGAAmG;YACnG,IAAIU,kBAAkB;gBACpB,MAAMa,OAAOrD,kBAAkB8B,kBAAkB,KAAK;gBACtD,MAAMwB,qBAAqBlD,MAAM8C,aAAa,CAAC5B,GAAG,CAAC+B;oBAS3CC;gBARRlD,MAAM8C,aAAa,CAACK,GAAG,CAACF,MAAM;oBAC5BG,MAAM9D,yBACJ2C,QAAQC,OAAO,CAAC;wBACdE;wBACA,4DAA4D;wBAC5DN;qBACD;oBAEHuB,MAAMH,CAAAA,2BAAAA,6BAAAA,KAAAA,IAAAA,mBAAoBG,IAAI,YAAxBH,2BAA4BxD,aAAa4D,SAAS;oBACxDC,cAAcC,KAAKC,GAAG;oBACtBC,sBAAsBnB,OAAOC,OAAO,CAACG,YAAY;oBACjDgB,cAAc,IAAI;gBACpB;YACF,CAAC;YAED,oFAAoF;YACpFpB,OAAOqB,MAAM,CACX9D,iBAAiB4B,iBAAiBmC,QAAQ,IAAIhE,aAAaiE,IAAI;QAEnE,OAAO;YACL,IAAI1B,kBAAkB;gBACpB,MAAMa,OAAOrD,kBACX,IAAI+B,IAAIY,OAAOC,OAAO,CAACI,WAAW,EAAGhB,OAAOX,QAAQ,CAACY,MAAM,GAC3D,KAAK;gBAEP,MAAMqB,qBAAqBlD,MAAM8C,aAAa,CAAC5B,GAAG,CAAC+B;oBAczCC;gBAbVlD,MAAM8C,aAAa,CAACK,GAAG,CACrBvD,kBACE,IAAI+B,IAAIY,OAAOC,OAAO,CAACI,WAAW,EAAGhB,OAAOX,QAAQ,CAACY,MAAM,GAC3D,KAAK,GAEP;oBACEuB,MAAM9D,yBACJ2C,QAAQC,OAAO,CAAC;wBACdE;wBACA,4DAA4D;wBAC5DN;qBACD;oBAEHuB,MAAMH,CAAAA,4BAAAA,6BAAAA,KAAAA,IAAAA,mBAAoBG,IAAI,YAAxBH,4BAA4BxD,aAAa4D,SAAS;oBACxDC,cAAcC,KAAKC,GAAG;oBACtBC,sBAAsBnB,OAAOC,OAAO,CAACG,YAAY;oBACjDgB,cAAc,IAAI;gBACpB;gBAEF,uFAAuF;gBACvFI,WAAW,IAAM;oBACfxB,OAAOyB,sBAAsB,CAC3BzB,OAAOC,OAAO,CAACG,YAAY,EAC3BP,kBACA,4DAA4D;oBAC5DN;gBAEJ;YACF,CAAC;YAEDS,OAAOL,OAAO,CAACG;QACjB,CAAC;IACH,EAAE,OAAOZ,GAAQ;QACf,IAAIA,EAAEwC,MAAM,KAAK,YAAY;YAC3B1B,OAAOqB,MAAM,CAACnC,EAAEyC,KAAK;QACvB,OAAO;YACL,MAAMzC,EAAC;QACT,CAAC;IACH;IAEAc,OAAOC,OAAO,CAACC,mBAAmB,GAAG,IAAI;IACzC,OAAOzC;AACT,CAAC"}