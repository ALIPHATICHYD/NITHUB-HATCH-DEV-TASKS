{"version":3,"sources":["../../../src/lib/typescript/writeConfigurationDefaults.ts"],"names":["promises","fs","chalk","CommentJson","semver","os","getTypeScriptConfiguration","getDesiredCompilerOptions","ts","userTsConfig","o","lib","suggested","allowJs","skipLibCheck","strict","forceConsistentCasingInFileNames","noEmit","gte","version","incremental","undefined","esModuleInterop","value","reason","module","parsedValue","ModuleKind","ESNext","parsedValues","ES2020","CommonJS","AMD","NodeNext","Node16","moduleResolution","ModuleResolutionKind","Node10","NodeJs","Node12","Bundler","filter","val","resolveJsonModule","compilerOptions","verbatimModuleSyntax","isolatedModules","jsx","JsxEmit","Preserve","getRequiredConfiguration","res","desiredCompilerOptions","optionKey","Object","keys","ev","writeConfigurationDefaults","tsConfigPath","isFirstTimeSetup","isAppDirEnabled","distDir","hasPagesDir","writeFile","EOL","options","tsOptions","raw","rawConfig","userTsConfigContent","readFile","encoding","parse","suggestedActions","requiredActions","check","push","cyan","bold","includes","_","nextAppTypes","include","plugins","Array","isArray","hasNextPlugin","some","name","length","console","log","strictNullChecks","exclude","stringify","green","forEach","action"],"mappings":"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"}