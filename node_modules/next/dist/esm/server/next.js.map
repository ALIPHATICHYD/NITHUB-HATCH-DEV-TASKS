{"version":3,"sources":["../../src/server/next.ts"],"names":["log","loadConfig","join","resolve","NON_STANDARD_NODE_ENV","PHASE_DEVELOPMENT_SERVER","SERVER_DIRECTORY","PHASE_PRODUCTION_SERVER","getTracer","NextServerSpan","formatUrl","findDir","ServerImpl","getServerImpl","undefined","Promise","require","default","SYMBOL_SET_STANDALONE_MODE","Symbol","SYMBOL_LOAD_CONFIG","NextServer","constructor","options","hostname","port","standaloneMode","getRequestHandler","req","res","parsedUrl","trace","requestHandler","getServerRequestHandler","getUpgradeHandler","socket","head","server","getServer","handleUpgrade","apply","setAssetPrefix","assetPrefix","preparedAssetPrefix","logError","args","render","renderToHTML","renderError","renderErrorToHTML","render404","serveStatic","prepare","dev","close","createServer","ServerImplementation","preloadedConfig","dir","conf","_renderWorker","serverPromise","then","process","env","__NEXT_PRIVATE_STANDALONE_CONFIG","JSON","stringify","output","warn","Error","reqHandlerPromise","wrap","bind","typescript","createTSPlugin","NODE_ENV","includes","console","customServer","shouldUseStandaloneMode","createServerHandler","handlerPromise","Proxy","get","_","propKey","config","distDir","NEXT_RUNTIME","serverDistDir","hasAppDir","minimalMode","handler","standaloneHandler","pathname","query","url","method","module","exports"],"mappings":"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"}