{"version":3,"sources":["../../src/server/server-route-utils.ts"],"names":["getRedirectStatus","modifyRouteRegex","getPathMatch","compileNonPath","prepareDestination","getRequestMeta","stringify","stringifyQs","format","formatUrl","normalizeRepeatedSlashes","getCustomRoute","params","rule","type","restrictedRedirectPaths","match","source","strict","removeUnnamedParams","regexModifier","internal","regex","undefined","sensitive","caseSensitive","name","fn","_req","_res","_params","_parsedUrl","finished","createHeaderRoute","headerRoute","matchesBasePath","matchesLocale","matchesLocaleAPIRoutes","matchesTrailingSlash","has","missing","res","hasParams","Object","keys","length","header","headers","key","value","toLowerCase","appendHeader","setHeader","stringifyQuery","req","query","initialQuery","initialQueryValues","values","encodeURIComponent","some","initialQueryVal","Array","isArray","includes","createRedirectRoute","redirectRoute","statusCode","parsedUrl","parsedDestination","appendParamsToQuery","destination","search","updatedDestination","startsWith","redirect","body","send"],"mappings":"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"}