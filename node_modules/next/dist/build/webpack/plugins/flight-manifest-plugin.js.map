{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["ClientReferenceManifestPlugin","pluginState","getProxiedPluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","constructor","options","dev","appDir","appDirBase","path","dirname","sep","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","clientModules","entryCSSFiles","chunkGroups","forEach","chunkGroup","getAppPathRequiredChunks","chunks","map","requiredChunk","SYSTEM_ENTRYPOINTS","has","files","file","endsWith","id","flat","filter","nonNullable","requiredChunks","chunkEntryName","test","replace","getFiles","f","startsWith","recordModule","mod","layer","WEBPACK_LAYERS","appClient","resource","type","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","relative","resourceResolveData","isAsyncModule","esmResource","addClientReference","exportName","async","edgeExportName","addSSRIdMapping","chunk","entryMods","chunkGraph","getChunkEntryModulesIterable","request","includes","connections","moduleGraph","getOutgoingConnections","connection","dependency","clientEntryMod","getResolvedModule","modId","getModuleId","module","concatenatedMod","concatenatedModId","CLIENT_REFERENCE_MANIFEST","json","JSON","stringify","undefined","sources","RawSource"],"mappings":"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"}