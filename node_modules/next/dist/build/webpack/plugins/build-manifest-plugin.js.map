{"version":3,"sources":["../../../../src/build/webpack/plugins/build-manifest-plugin.ts"],"names":["getEntrypointFiles","BuildManifestPlugin","generateClientManifest","compiler","compilation","assetMap","rewrites","compilationSpan","spans","get","genClientManifestSpan","traceChild","traceFn","clientManifest","__rewrites","appDependencies","Set","pages","sortedPageKeys","getSortedRoutes","Object","keys","forEach","page","dependencies","filteredDeps","filter","dep","has","length","sortedPages","devalue","entrypoint","getFiles","file","test","map","replace","processRoute","r","rewrite","destination","startsWith","constructor","options","buildId","isDevFallback","beforeFiles","afterFiles","fallback","appDirEnabled","exportRuntime","createAssets","assets","createAssetsSpan","entrypoints","polyfillFiles","devFiles","ampDevFiles","lowPriorityFiles","rootMainFiles","ampFirstPages","ampFirstEntryNames","ampFirstEntryNamesMap","entryName","pagePath","getRouteFromEntrypoint","push","mainFiles","CLIENT_STATIC_FILES_RUNTIME_MAIN","CLIENT_STATIC_FILES_RUNTIME_MAIN_APP","compilationAssets","getAssets","p","name","endsWith","info","CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL","v","CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH","CLIENT_STATIC_FILES_RUNTIME_AMP","values","SYSTEM_ENTRYPOINTS","filesForPage","CLIENT_STATIC_FILES_PATH","srcEmptySsgManifest","ssgManifestPath","sources","RawSource","sort","reduce","a","c","buildManifestName","BUILD_MANIFEST","JSON","stringify","MIDDLEWARE_BUILD_MANIFEST","clientManifestPath","apply","hooks","make","tap","processAssets","stage","webpack","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS"],"mappings":"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"}