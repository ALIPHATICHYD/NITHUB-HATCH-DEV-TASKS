{"version":3,"sources":["../../src/server/server-route-utils.ts"],"names":["getCustomRoute","createHeaderRoute","stringifyQuery","createRedirectRoute","params","rule","type","restrictedRedirectPaths","match","getPathMatch","source","strict","removeUnnamedParams","regexModifier","internal","regex","modifyRouteRegex","undefined","sensitive","caseSensitive","name","fn","_req","_res","_params","_parsedUrl","finished","headerRoute","matchesBasePath","matchesLocale","matchesLocaleAPIRoutes","matchesTrailingSlash","has","missing","res","hasParams","Object","keys","length","header","headers","key","value","compileNonPath","toLowerCase","appendHeader","setHeader","req","query","initialQuery","getRequestMeta","initialQueryValues","values","stringifyQs","encodeURIComponent","some","initialQueryVal","Array","isArray","includes","redirectRoute","statusCode","parsedUrl","parsedDestination","prepareDestination","appendParamsToQuery","destination","search","updatedDestination","formatUrl","startsWith","normalizeRepeatedSlashes","redirect","getRedirectStatus","body","send"],"mappings":"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"}