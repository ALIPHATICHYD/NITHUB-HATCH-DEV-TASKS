{"version":3,"sources":["../../src/export/index.ts"],"names":["ExportError","exportApp","exists","promisify","existsOrig","divideSegments","number","segments","result","dividedNumber","Math","floor","push","createProgress","total","label","Error","currentSegmentTotal","shift","currentSegmentCount","lastProgressOutput","Date","now","curProgress","progressSpinner","createSpinner","spinner","frames","interval","newText","text","console","log","stop","code","dir","options","span","nextExportSpan","traceChild","traceAsyncFn","nextConfig","resolve","traceFn","loadEnvConfig","Log","loadConfig","PHASE_EXPORT","threads","experimental","cpus","distDir","join","isExportOutput","output","isInvokedFromCli","hasOutdirFromCli","warn","existsSync","serverActions","telemetry","buildExport","Telemetry","record","eventCliSession","webpackVersion","cliCommand","isSrcDir","hasNowJson","findUp","cwd","isCustomServer","turboFlag","pagesDir","appDir","subFolders","trailingSlash","silent","info","buildIdFile","BUILD_ID_FILE","customRoutesDetected","filter","config","hasNextSupport","length","buildId","readFileSync","pagesManifest","pages","require","SERVER_DIRECTORY","PAGES_MANIFEST","prerenderManifest","undefined","PRERENDER_MANIFEST","_","appRoutePathManifest","APP_PATH_ROUTES_MANIFEST","err","isError","excludedPrerenderRoutes","Set","Object","keys","defaultPathMap","hasApiRoutes","page","isAPIRoute","dynamicRoutes","add","mapAppRouteToPage","Map","pageName","routePath","entries","set","isAppPageRoute","routes","_isAppDir","outDir","outdir","recursiveDelete","promises","mkdir","recursive","writeFileSync","EXPORT_DETAIL","JSON","stringify","version","outDirectory","success","recursiveCopy","CLIENT_STATIC_FILES_PATH","exportPathMap","defaultMap","i18n","images","loader","unoptimized","isNextImageImported","readFile","EXPORT_MARKER","then","parse","catch","renderOpts","nextExport","assetPrefix","replace","dev","hotReloader","basePath","canonicalBase","amp","ampValidatorPath","validator","ampSkipValidation","skipValidation","ampOptimizerConfig","optimizer","locales","locale","defaultLocale","domainLocales","domains","disableOptimizedLoading","supportsDynamicHTML","crossOrigin","optimizeCss","nextConfigOutput","nextScriptWorkers","optimizeFonts","largePageDataBytes","serverComponents","hasAppDir","hasServerComponents","serverActionsBodySizeLimit","nextFontManifest","NEXT_FONT_MANIFEST","clientReferenceManifest","CLIENT_REFERENCE_MANIFEST","serverActionsManifest","SERVER_REFERENCE_MANIFEST","strictNextHead","deploymentId","serverRuntimeConfig","publicRuntimeConfig","runtimeConfig","globalThis","__NEXT_DATA__","exportMap","exportPaths","map","path","denormalizePagePath","normalizePagePath","filteredPaths","route","fallbackEnabledPages","prerenderInfo","fallback","size","SSG_FALLBACK_EXPORT_ERROR","hasMiddleware","middlewareManifest","MIDDLEWARE_MANIFEST","middleware","chalk","yellow","bold","progress","prefixes","statusMessage","pagesDataDir","ampValidations","hadValidationError","publicDir","CLIENT_PUBLIC_FILES_PATH","timeout","staticPageGenerationTimeout","infoPrinted","exportPage","exportAppPage","endWorker","exportPageWorker","exportAppPageWorker","Promise","worker","Worker","onRestart","_method","attempts","maxRetries","numWorkers","enableWorkerThreads","workerThreads","exposedMethods","default","bind","end","renderError","errorPaths","all","pageExportSpan","setAttribute","pathMap","exportPageOrApp","parentSpanId","id","httpAgentOptions","debugOutput","isrMemoryCacheSize","fetchCache","fetchCacheKeyPrefix","incrementalCacheHandlerPath","validation","ampValidationResult","Array","isArray","errors","error","fromBuildExportRevalidate","initialPageRevalidationMap","fromBuildExportMeta","initialPageMetaMap","ssgNotFound","ssgNotFoundPaths","durations","pageDurationMap","duration","endWorkerPromise","srcRoute","appPageName","get","isAppPath","Boolean","isAppRouteHandler","isAppRouteRoute","notFoundRoutes","includes","pagePath","getPagePath","distPagesDir","slice","split","orig","handlerSrc","handlerDest","dirname","copyFile","htmlDest","sep","ampHtmlDest","jsonDest","htmlSrc","jsonSrc","formatAmpMessages","sort","flush"],"mappings":"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"}